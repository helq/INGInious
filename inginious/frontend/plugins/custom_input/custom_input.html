$def with (inputId, courseid, taskid)

<br>
<br>
<div>
    <script>
    function runCustomInput(inputId) {
        var customTestOuputArea = $$('#customoutput-'+inputId);

        var runCustomInputCallBack = function (data) {
            if ('status' in data && data['status'] === 'done'
                  && ('result' in data) ){
                customTestOuputArea.text(data.text);
            }

            unblurTaskForm();
        };

        blurTaskForm();
        resetAlerts();
        customTestOuputArea.text('Running...');

        var taskForm = new FormData($$('form#task')[0]);
        //taskForm.set("@action", "run_custom_input");
        taskForm.set("courseid", "$courseid");
        taskForm.set("taskid", "$taskid");
        $$.ajax({
            url: '/api/custom_input/',
            method: "POST",
            dataType: 'json',
            data: taskForm,
            processData: false,
            contentType: false,
            success: runCustomInputCallBack,
            error: function (er) {
                unblurTaskForm();
            }
        });
    }

        function uploadfile(inputId) {
            var inputFileId = "filelink-" + inputId;
            var inputFile = $$("#" + inputFileId);

            var input = document.getElementById(inputFileId);
            input.addEventListener("change", function (event) {
                var reader = new FileReader();
                reader.onload = function (event) {
                    var contents = event.target.result;
                    document.getElementById(inputId).value = contents;
                };
                reader.readAsText(input.files[0]);
            }, false);

            inputFile.click();
        }

        function toggleElement(id) {
            var element = document.getElementById(id);
            if (element.style.display === 'none') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }
        }

    $$( document ).ready(function() {
        var codeUploadLink = $$('a[id^="link"]');
        codeUploadLink.each(function() {
            var codeUploadLinkID = $$(this).attr('id');
            $$(this).click(function(e) {
                var fileUploaderID = 'file' + codeUploadLinkID;
                var fileUploaderElement = $$('#' + fileUploaderID);
                fileUploaderElement.click();
                e.preventDefault();
            });
        });

        var codeUploadInput = $$('input[id^="filelink"]');
        codeUploadInput.each(function() {
            var codeUploadInputId = $$(this).attr('id');
            var textareaId = codeUploadInputId.replace("filelink-", "");
            var input = this;
            var textarea = $$('#'+textareaId);
            var isCodeMirrorArea = textarea.hasClass("code-editor");

            $$(this).change(function(e) {
                var reader = new FileReader();
                reader.onload = function(event) {
                    var contents = event.target.result;

                    if (isCodeMirrorArea) {
                        var editor = getEditorForProblemId(textareaId);
                        editor.setValue(contents, -1);
                    } else
                        textarea[0].value = contents;
                };
                reader.readAsText(input.files[0]);
            });
        });


    });
    </script>
  <button type="button" class="btn btn-primary" onclick="toggleElement('tools-$inputId')">Custom Input</button>
  <div id="tools-$inputId" style="display: none;">
    <div class="row panel-body">
      <div class="col-md-6 pr-1">
        <input type="file" id="filelink-custominput-$inputId" style="display: none;" />
        Paste your input or <a href="#" id="link-custominput-$inputId">load it from file</a>
        <textarea
          id="custominput-$inputId"
          name="$inputId/input"
          rows="10"
          class="form-control noresize"
          placeholder="Your input goes here"
          data-optional="True"
        ></textarea>
      </div>
      <div class="col-md-6 pl-1">
        <br>
        <textarea readonly
          id="customoutput-$inputId"
          rows="10"
          class="form-control noresize"
          style="background-color: #fff"
          placeholder="Your output goes here"
        ></textarea>
        <br>
      </div>

      <div class="col-md-4">
        <button type="button" class="btn btn-default btn-md btn-block" onclick="runCustomInput('$inputId')">Test</button>
      </div>
    </div>
  </div>
</div>
