$def with (inputId, courseid, taskid)

<br>
<br>
<div>
    <script>


        function displayTaskWaitingForUnsavedJob () {
             var task_alert = $('#task_alert');
             var content = '<i class="fa fa-spinner fa-pulse fa-fw" aria-hidden="true"></i> <b>Evaluating...</b>';
             var div_content = "<div class='loading-alert'>"+content+"</div>";
             task_alert.html(getAlertCode(div_content, "info", false));
        }
        function displayTaskStudentErrorAlert(content) {
            displayTaskStudentAlertWithProblems(content,
                "<b>There are some errors in your answer. Your score is " + content["grade"] + "%</b>",
                "danger", false);
        }
        function displayCustomInputAlert(content) {
            displayTaskStudentAlertWithProblems(content,
                "<b>Custom run output:</b>",
                "success", true);
        }

        function runCustomInput(inputId) {
            var runInputCallBack = function (data) {
                if ('status' in data && data['status'] == 'done') {
                    if ('result' in data) {
                        if (data['result'] == "failed") {
                            displayTaskStudentErrorAlert(data);
                        }
                        else if (data['result'] == "success") {
                            displayCustomInputAlert(data);
                        }
                    }
                }
                unblurTaskForm();
            }

            blurTaskForm();

            var taskForm = new FormData($$('form#task')[0]);
            //taskForm.set("@action", "run_custom_input");
            taskForm.set("courseid", "$courseid");
            taskForm.set("taskid", "$taskid");
            $$.ajax({
                url: '/api/custom_input/',
                method: "POST",
                dataType: 'json',
                data: taskForm,
                processData: false,
                contentType: false,
                success: runInputCallBack,
                error: function (er) {
                }
            });
        }

        function uploadfile(inputId) {
            var inputFileId = "filelink-" + inputId;
            var inputFile = $$("#" + inputFileId);

            var input = document.getElementById(inputFileId);
            input.addEventListener("change", function (event) {
                var reader = new FileReader();
                reader.onload = function (event) {
                    var contents = event.target.result;
                    document.getElementById(inputId).value = contents;
                };
                reader.readAsText(input.files[0]);
            }, false);

            inputFile.click();
        }

        function toggleElement(id) {
            var element = document.getElementById(id);
            if (element.style.display === 'none') {
                element.style.display = 'block';
            } else {
                element.style.display = 'none';
            }
        }
    </script>
  <button type="button" class="btn btn-primary" onclick="toggleElement('tools-$inputId')">Custom Input</button>
  <div id="tools-$inputId" style="display: none;">
    <div class="row panel-body">
      <div class="col-md-6 pr-1">
        <input type="file" id="filelink-custominput-$inputId" style="display: none;" />
        Paste your input or <a href="#" id="link-custominput-$inputId">load it from file</a>
        <textarea
          id="custominput-$inputId"
          name="$inputId/input"
          rows="10"
          class="form-control noresize"
          placeholder="Your input goes here"
          data-optional="True"
        ></textarea>
      </div>
      <div class="col-md-6 pl-1">
        <br>
        <textarea readonly
          id="customoutput-$inputId"
          rows="10"
          class="form-control noresize"
          style="background-color: #fff"
          placeholder="Your output goes here"
        ></textarea>
        <br>
      </div>

      <div class="col-md-4">
        <button type="button" class="btn btn-default btn-md btn-block" onclick="runCustomInput('$inputId')">Test</button>
      </div>
    </div>
  </div>
</div>
